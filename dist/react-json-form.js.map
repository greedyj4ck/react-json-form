{"version":3,"file":"react-json-form.js","sources":["../src/data.js","../src/components/buttons.js","../src/components/loaders.js","../src/components/icons.js","../src/components/widgets.js","../src/util.js","../src/components/form.js","../src/components/containers.js","../src/ui.js","../src/form.js","../src/renderer.js","../src/index.js"],"sourcesContent":["export function getBlankObject(schema, getRef) {\n    let keys = {};\n\n    let schema_keys = schema.keys || schema.properties;\n\n    for (let key in schema_keys) {\n        let value = schema_keys[key];\n        \n        let isRef = value.hasOwnProperty('$ref');\n        \n        if (isRef)\n            value = getRef(value['$ref']);\n\n        let type = value.type;\n\n        if (type === 'list')\n            type = 'array';\n        else if (type === 'dict')\n            type = 'object';\n\n        if (type === 'array')\n            keys[key] = isRef ? [] : getBlankArray(value, getRef);\n        else if (type === 'object')\n            keys[key] = getBlankObject(value, getRef);\n        else if (type === 'boolean')\n            keys[key] = value.default || false;\n        else if (type === 'integer' || type === 'number')\n            keys[key] = value.default || null;\n        else // string etc.\n            keys[key] = value.default || '';\n    }\n\n    return keys;\n}\n\n\nexport function getBlankArray(schema, getRef) {\n    if (schema.default)\n        return schema.default;\n\n    let items = [];\n\n    let minItems = schema.minItems || schema.min_items || 0;\n\n    if (minItems === 0)\n        return items;\n\n    if (schema.items.hasOwnProperty('$ref')) {\n        // :TODO: this will most probably mutate the original schema\n        // but i'll fix it later\n        schema.items = getRef(schema.items['$ref']);\n    }\n\n    let type = schema.items.type;\n\n    if (type === 'list')\n        type = 'array';\n    else if (type === 'dict')\n        type = 'object';\n\n    if (type === 'array') {\n        items.push(getBlankArray(schema.items, getRef))\n        return items;\n    }\n    else if (type === 'object') {\n        items.push(getBlankObject(schema.items, getRef));\n        return items;\n    }\n\n    if (schema.items.widget === 'multiselect')\n        return items;\n\n    if (type === 'boolean')\n        items.push(schema.items.default || false);\n    else if (type === 'integer' || type === 'number')\n        items.push(schema.items.default || null);\n    else // string, etc.\n        items.push(schema.items.default || '');\n\n    return items;\n}\n\n\nexport function getBlankData(schema, getRef) {\n    if (schema.hasOwnProperty('$ref'))\n        schema = getRef(schema['$ref']);\n\n    let type = schema.type;\n\n    if (type === 'list')\n        type = 'array';\n    else if (type === 'dict')\n        type = 'object';\n\n    if (type === 'array')\n        return getBlankArray(schema, getRef);\n    else if (type === 'object')\n        return getBlankObject(schema, getRef);\n    else if (type === 'boolean')\n        return schema.default || false;\n    else if (type === 'integer' || type === 'number')\n        return schema.default || null;\n    else // string, etc.\n        return schema.default || '';\n}\n\n\n\nfunction getSyncedArray(data, schema, getRef) {\n    let newData = JSON.parse(JSON.stringify(data));\n\n    if (schema.items.hasOwnProperty('$ref')) {\n        // :TODO: this will most probably mutate the original schema\n        // but i'll fix it later\n        schema.items = getRef(schema.items['$ref'])\n    }\n\n    let type = schema.items.type;\n    \n    if (type === 'list')\n        type = 'array';\n    else if (type === 'dict')\n        type = 'object';\n\n    for (let i = 0; i < data.length; i++) {\n        let item = data[i];\n\n        if (type === 'array') {\n            newData[i] = getSyncedArray(item, schema.items, getRef);\n        } else if (type === 'object') {\n            newData[i] = getSyncedObject(item, schema.items, getRef);\n        }\n        else {\n            if ((type === 'integer' || type === 'number') && item === '')\n                newData[i] = null;\n        }\n    }\n\n    return newData;\n}\n\n\nfunction getSyncedObject(data, schema, getRef) {\n    let newData = JSON.parse(JSON.stringify(data));\n\n    let schema_keys = schema.keys || schema.properties;\n\n    let keys = [...Object.keys(schema_keys)];\n\n    for (let i = 0; i < keys.length; i++) {\n        let key = keys[i];\n        let schemaValue = schema_keys[key];\n        \n        let isRef = schemaValue.hasOwnProperty('$ref');\n        \n        if (isRef)\n            schemaValue = getRef(schemaValue['$ref']);\n\n        let type = schemaValue.type;\n    \n        if (type === 'list')\n            type = 'array';\n        else if (type === 'dict')\n            type = 'object';\n      \n        if (!data.hasOwnProperty(key)) {\n            if (type === 'array')\n                newData[key] = getSyncedArray([], schemaValue, getRef);\n            else if (type === 'object')\n                newData[key] = getSyncedObject({}, schemaValue, getRef);\n            else if (type === 'boolean')\n                newData[key] = false;\n            else if (type === 'integer' || type === 'number')\n                newData[key] = null;\n            else\n                newData[key] = '';\n        } else {\n            if (type === 'array')\n                newData[key] = getSyncedArray(data[key], schemaValue, getRef);\n            else if (type === 'object')\n                newData[key] = getSyncedObject(data[key], schemaValue, getRef);\n            else {\n                if ((type === 'integer' || type === 'number') && data[key] === '')\n                    newData[key] = null;\n                else\n                    newData[key] = data[key];\n            }\n        }\n        \n    }\n\n    return newData;\n}\n\n\nexport function getSyncedData(data, schema, getRef) {\n    // adds those keys to data which are in schema but not in data\n\n    if (schema.hasOwnProperty('$ref'))\n        schema = getRef(schema['$ref']);\n\n    let type = schema.type;\n    \n    if (type === 'list')\n        type = 'array';\n    else if (type === 'dict')\n        type = 'object';\n\n    if (type === 'array') {\n        return getSyncedArray(data, schema, getRef);\n    } else if (type === 'object') {\n        return getSyncedObject(data, schema, getRef);\n    }\n\n    return data;\n}\n","export default function Button({className, ...props}) {\n    if (!className)\n        className = '';\n\n    let classes = className.split(' ');\n\n    className = '';\n    for (let i = 0; i < classes.length; i++) {\n        className = className + 'rjf-' + classes[i] + '-button ';\n    }\n\n    return (\n        <button \n            className={className.trim()}\n            type=\"button\"\n            {...props}\n        >\n            {props.children}\n        </button>\n    );\n}","export default function Loader (props) {\n    return <div className=\"rjf-loader\"></div>;\n}\n","export default function Icon(props) {\n    let icon;\n\n    switch (props.name) {\n        case 'chevron-up':\n            icon = <ChevronUp />;\n            break;\n        case 'chevron-down':\n            icon = <ChevronDown />;\n            break;\n    }\n\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className={\"rjf-icon rjf-icon-\" + props.name} viewBox=\"0 0 16 16\">\n            {icon}\n        </svg>\n    );\n}\n\nfunction ChevronUp(props) {\n    return (\n        <path fillRule=\"evenodd\" d=\"M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z\"/>\n    );\n}\n\nfunction ChevronDown(props) {\n    return (\n        <path fillRule=\"evenodd\" d=\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z\"/>\n    );\n}\n","import Button from './buttons';\nimport Icon from './icons';\n\n\nexport class TimePicker extends React.Component {\n    componentWillUnmount() {\n        let data = {\n            hh: this.validateValue('hh', this.props.hh).toString().padStart(2, '0'),\n            mm: this.validateValue('mm', this.props.mm).toString().padStart(2, '0'),\n            ss: this.validateValue('ss', this.props.ss).toString().padStart(2, '0')\n        }\n        this.sendValue(data);\n    }\n\n    sendValue = (data) => {\n        this.props.onChange(data);\n    }\n\n    validateValue = (name, value) => {\n        if (name === 'hh' && value < 1)\n            return 1;\n        else if (name !== 'hh' && value < 0)\n            return 0;\n        else if (name === 'hh' && value > 12)\n            return 12;\n        else if (name !== 'hh' && value > 59)\n            return 59;\n\n        return value;\n    }\n\n    handleChange = (e) => {\n        let name = e.target.dataset.name;\n        let value = e.target.value;\n\n        if (isNaN(value))\n            return;\n\n        let validValue = this.validateValue(name, parseInt(value) || 0);\n\n        if (name === 'hh' && (value === '0' || value === '' || value === '00') && validValue === 1)\n            validValue = 0;\n\n        if (value.startsWith('0') && validValue < 10 && validValue !== 0) {\n            validValue = validValue.toString().padStart(2, '0');\n        }\n\n        this.sendValue({[name]: value !== '' ? validValue.toString() : ''});\n    }\n\n    handleKeyDown = (e) => {\n        if (e.keyCode !== 38 && e.keyCode !== 40)\n            return;\n\n        let name = e.target.dataset.name;\n        let value = parseInt(e.target.value) || 0;\n\n        if (e.keyCode === 38) {\n            value++;\n        } else if (e.keyCode === 40) {\n            value--;\n        }\n\n        this.sendValue({[name]: this.validateValue(name, value).toString().padStart(2, '0')});\n    }\n\n    handleSpin = (name, type) => {\n        let value = this.props[name];\n\n        if (name === 'ampm') {\n            value = value === 'am' ? 'pm': 'am';\n        } else {\n            value = parseInt(value) || 0;\n            if (type === 'up') {\n                value++;\n            } else {\n                value--;\n            }\n            value = this.validateValue(name, value).toString().padStart(2, '0');\n        }\n\n        this.sendValue({[name]: value});\n    }\n\n    handleBlur = (e) => {\n        let value = this.validateValue(e.target.dataset.name, parseInt(e.target.value) || 0);\n\n        if (value < 10) {\n            this.sendValue({[e.target.dataset.name]: value.toString().padStart(2, '0')});\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"rjf-time-picker\">\n                <div className=\"rjf-time-picker-row rjf-time-picker-labels\">\n                    <div className=\"rjf-time-picker-col\">Hrs</div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\">Min</div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\">Sec</div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\">am/pm</div>\n                </div>\n\n                <div className=\"rjf-time-picker-row\">\n                    <div className=\"rjf-time-picker-col\"><Button onClick={() => this.handleSpin('hh', 'up')}><Icon name=\"chevron-up\"/></Button></div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\"><Button onClick={() => this.handleSpin('mm', 'up')}><Icon name=\"chevron-up\"/></Button></div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\"><Button onClick={() => this.handleSpin('ss', 'up')}><Icon name=\"chevron-up\"/></Button></div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\"><Button onClick={() => this.handleSpin('ampm', 'up')}><Icon name=\"chevron-up\"/></Button></div> \n                </div>\n\n                <div className=\"rjf-time-picker-row rjf-time-picker-values\">\n                    <div className=\"rjf-time-picker-col\"><input type=\"text\" data-name=\"hh\" value={this.props.hh} onChange={this.handleChange} onBlur={this.handleBlur} onKeyDown={this.handleKeyDown} /></div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\">:</div>\n                    <div className=\"rjf-time-picker-col\"><input type=\"text\" data-name=\"mm\" value={this.props.mm} onChange={this.handleChange} onBlur={this.handleBlur} onKeyDown={this.handleKeyDown} /></div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\">:</div>\n                    <div className=\"rjf-time-picker-col\"><input type=\"text\" data-name=\"ss\" value={this.props.ss} onChange={this.handleChange} onBlur={this.handleBlur} onKeyDown={this.handleKeyDown} /></div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\">{this.props.ampm}</div>\n                </div>\n\n                <div className=\"rjf-time-picker-row\">\n                    <div className=\"rjf-time-picker-col\"><Button onClick={() => this.handleSpin('hh', 'down')}><Icon name=\"chevron-down\"/></Button></div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\"><Button onClick={() => this.handleSpin('mm', 'down')}><Icon name=\"chevron-down\"/></Button></div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\"><Button onClick={() => this.handleSpin('ss', 'down')}><Icon name=\"chevron-down\"/></Button></div>\n                    <div className=\"rjf-time-picker-col rjf-time-picker-col-sm\"></div>\n                    <div className=\"rjf-time-picker-col\"><Button onClick={() => this.handleSpin('ampm', 'down')}><Icon name=\"chevron-down\"/></Button></div> \n                </div>\n            </div>\n        );\n    }\n}\n","export const EditorContext = React.createContext();\n\n\nexport function capitalize(string) {\n    if (!string)\n        return '';\n    \n    return string.charAt(0).toUpperCase() + string.substr(1).toLowerCase();\n}\n\n\nexport function getVerboseName(name) {\n    if (name === undefined || name === null)\n        return '';\n\n    name = name.replace(/_/g, ' ');\n    return capitalize(name);\n}\n\n\nexport function getCsrfCookie() {\n    let csrfCookies = document.cookie.split(';').filter((item) => item.trim().indexOf('csrftoken=') === 0);\n\n    if (csrfCookies.length) {\n        return csrfCookies[0].split('=')[1];\n    } else {\n        // if no cookie found, get the value from the csrf form input\n        let input = document.querySelector('input[name=\"csrfmiddlewaretoken\"]');\n        if (input)\n            return input.value;\n    }\n\n    return null;\n}\n","import Button from './buttons';\nimport Loader from './loaders';\nimport {TimePicker} from './widgets';\nimport {EditorContext, getCsrfCookie, capitalize} from '../util';\n\n\nexport function FormInput({label, help_text, error, inputRef, ...props}) {\n\n    if (props.type === 'string')\n        props.type = 'text'\n\n    if (inputRef)\n        props.ref = inputRef;\n\n    if (props.value === null)\n        props.value = '';\n\n    return (\n        <div>\n            {label && <label>{label}</label>}\n            <div className=\"rjf-input-group\">\n                <input {...props} />\n                {help_text && <span className=\"rjf-help-text\">{help_text}</span>}\n            </div>\n        </div>\n    );\n}\n\n\nexport function FormCheckInput({label, help_text, error, value, ...props}) {\n\n    if (!label)\n        label = props.name.toUpperCase();\n\n    if (props.type === 'bool')\n        props.type = 'checkbox';\n\n    if (props.checked === undefined)\n        props.checked = value;\n\n    if (props.checked === '' || props.checked === null || props.checked === undefined)\n        props.checked = false\n\n    if (props.readOnly)\n        props.disabled = true;\n\n    return (\n        <div className=\"rjf-check-input\">\n            <label><input {...props} /> {label}</label>\n            {help_text && <span className=\"rjf-help-text\">{help_text}</span>}\n        </div>\n    );\n}\n\n\nexport function FormRadioInput({label, help_text, error, value, options, ...props}) {\n    if (props.readOnly)\n        props.disabled = true;\n\n    return (\n        <div className=\"rjf-check-input\">\n            <label>{label}</label>\n            {options.map((option, i) => {\n                let label, inputValue;\n                if (typeof option === 'object') {\n                    label = option.label;\n                    inputValue = option.value;\n                } else {\n                    label = option;\n                    if (typeof label === 'boolean')\n                        label = capitalize(label.toString());\n                    inputValue = option;\n                }\n\n                return (\n                    <label key={label + '_' + inputValue + '_' + i}>\n                        <input {...props} value={inputValue} checked={inputValue === value} /> {label}\n                    </label>\n                );\n            })}\n            {help_text && <span className=\"rjf-help-text\">{help_text}</span>}\n        </div>\n    );\n}\n\n\nexport function FormSelectInput({label, help_text, error, value, options, ...props}) {\n    if (props.readOnly)\n        props.disabled = true;\n\n    return (\n        <div>\n            {label && <label>{label}</label>}\n            <div className=\"rjf-input-group\">\n                <select value={value || ''} {...props}>\n                    <option disabled value=\"\" key={'__placehlder'}>Select...</option>\n                    {options.map((option, i) => {\n                        let label, inputValue;\n                        if (typeof option === 'object') {\n                            label = option.label;\n                            inputValue = option.value;\n                        } else {\n                            label = option;\n                            if (typeof label === 'boolean')\n                                label = capitalize(label.toString());\n                            inputValue = option;\n                        }\n\n                        return (\n                            <option value={inputValue} key={label + '_' + inputValue + '_' + i}>\n                                {label}\n                            </option>\n                        );\n                    })}\n                </select>\n                {help_text && <span className=\"rjf-help-text\">{help_text}</span>}\n            </div>\n        </div>\n    );\n}\n\nexport class FormMultiSelectInput extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            showOptions: false\n        };\n\n        this.optionsContainer = React.createRef();\n        this.input = React.createRef();\n    }\n\n    handleChange = (e) => {\n        let value = [...this.props.value];\n\n        if (e.target.checked) {\n            value.push(e.target.value);\n        } else {\n            value = value.filter((item) => item !== e.target.value);\n        }\n\n        let event = {\n            target: {\n                type: this.props.type,\n                value: value,\n                name: this.props.name\n            }\n        };\n\n        this.props.onChange(event);\n    }\n\n    showOptions = (e) => {\n        if (!this.state.showOptions)\n            this.setState({showOptions: true});\n    }\n\n    hideOptions = (e) => {\n        this.setState({showOptions: false});\n    }\n\n    toggleOptions = (e) => {\n        this.setState((state) => ({showOptions: !state.showOptions}))\n    }\n\n    render() {\n        return (\n            <div className=\"rjf-multiselect-field\">\n                <FormInput\n                    label={this.props.label}\n                    type=\"text\"\n                    value={this.props.value.length ? this.props.value.length + ' selected' : 'Select...'}\n                    help_text={this.props.help_text}\n                    error={this.props.error}\n                    onClick={this.toggleOptions}\n                    readOnly={true}\n                    inputRef={this.input}\n                    className=\"rjf-multiselect-field-input\"\n                />\n                {this.state.showOptions &&\n                    <FormMultiSelectInputOptions\n                        options={this.props.options}\n                        value={this.props.value}\n                        hideOptions={this.hideOptions}\n                        onChange={this.handleChange}\n                        containerRef={this.optionsContainer}\n                        inputRef={this.input}\n                        disabled={this.props.readOnly}\n                        hasHelpText={this.props.help_text && 1}\n                    />\n                }\n            </div>\n        )\n    }\n}\n\nclass FormMultiSelectInputOptions extends React.Component {\n    componentDidMount() {\n        document.addEventListener('mousedown', this.handleClickOutside);\n    }\n\n    componentWillUnmount() {\n      document.removeEventListener('mousedown', this.handleClickOutside);\n    }\n\n    handleClickOutside = (e) => {\n        if (this.props.containerRef.current &&\n            !this.props.containerRef.current.contains(e.target) &&\n            !this.props.inputRef.current.contains(e.target)\n        )\n            this.props.hideOptions();\n    };\n\n    render() {\n        return (\n            <div ref={this.props.containerRef}>\n                <div\n                    className=\"rjf-multiselect-field-options-container\"\n                    style={this.props.hasHelpText ? {marginTop: '-15px'} : {}}\n                >\n                    {this.props.options.map((option, i) => {\n                        let label, inputValue;\n                        if (typeof option === 'object') {\n                            label = option.label;\n                            inputValue = option.value;\n                        } else {\n                            label = option;\n                            if (typeof label === 'boolean')\n                                label = capitalize(label.toString());\n                            inputValue = option;\n                        }\n\n                        let selected = this.props.value.indexOf(inputValue) > -1;\n\n                        let optionClassName = 'rjf-multiselect-field-option';\n                        if (selected)\n                            optionClassName += ' selected';\n                        if (this.props.disabled)\n                            optionClassName += ' disabled';\n\n                        return (\n                            <div key={label + '_' + inputValue + '_' + i} className={optionClassName}>\n                                <label>\n                                    <input\n                                        type=\"checkbox\"\n                                        onChange={this.props.onChange}\n                                        value={inputValue}\n                                        checked={selected}\n                                        disabled={this.props.disabled}\n                                    /> {label}\n                                </label>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        );\n    }\n\n}\n\nexport function dataURItoBlob(dataURI) {\n      // Split metadata from data\n      const splitted = dataURI.split(\",\");\n      // Split params\n      const params = splitted[0].split(\";\");\n      // Get mime-type from params\n      const type = params[0].replace(\"data:\", \"\");\n      // Filter the name property from params\n      const properties = params.filter(param => {\n            return param.split(\"=\")[0] === \"name\";\n      });\n      // Look for the name and use unknown if no name property.\n      let name;\n      if (properties.length !== 1) {\n            name = \"unknown\";\n      } else {\n            // Because we filtered out the other property,\n            // we only have the name case here.\n            name = properties[0].split(\"=\")[1];\n      }\n\n      // Built the Uint8Array Blob parameter from the base64 string.\n      const binary = atob(splitted[1]);\n      const array = [];\n      for (let i = 0; i < binary.length; i++) {\n            array.push(binary.charCodeAt(i));\n      }\n      // Create the blob object\n      const blob = new window.Blob([new Uint8Array(array)], { type });\n\n      return {blob, name};\n}\n\n\n\nexport class FormFileInput extends React.Component {\n    static contextType = EditorContext;\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            value: props.value,\n            fileName: this.getFileName(),\n            loading: false\n        };\n\n        this.inputRef = React.createRef();\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (this.props.value !== prevProps.value) {\n            this.setState({\n                value: this.props.value, \n                fileName: this.getFileName()\n            });\n        }\n    }\n\n    getFileName = () => {\n        if (!this.props.value)\n            return '';\n\n        if (this.props.type === 'data-url') {\n            return this.extractFileInfo(this.props.value).name;\n        } else if (this.props.type === 'file-url') {\n            return this.props.value;\n        } else {\n            return 'Unknown file';\n        }\n    }\n\n    extractFileInfo = (dataURL) => {\n        const {blob, name} = dataURItoBlob(dataURL);\n        return {\n            name: name,\n            size: blob.size,\n            type: blob.type\n        }\n    }\n\n    addNameToDataURL = (dataURL, name) => {\n        return dataURL.replace(';base64', ';name=' + encodeURIComponent(name) + ';base64');\n    }\n\n    handleChange = (e) => {\n        if (this.props.type === 'data-url') {\n            let file = e.target.files[0];\n            let fileName = file.name\n\n            let reader = new FileReader();\n\n            reader.onload = () => {\n\n                // this.setState({src: reader.result});\n\n                // we create a fake event object\n                let event = {\n                    target: {\n                        type: 'text',\n                        value: this.addNameToDataURL(reader.result, fileName),\n                        name: this.props.name\n                    }\n                };\n\n                this.props.onChange(event);\n\n            }\n            reader.readAsDataURL(file);\n        } else if (this.props.type === 'file-url') {\n            let endpoint = this.context.fileUploadEndpoint;\n            if (!endpoint) {\n                console.error(\n                    \"Error: fileUploadEndpoint option need to be passed \"\n                    + \"while initializing editor for enabling file uploads.\");\n                alert(\"Files can't be uploaded.\");\n                return;\n            }\n\n            this.setState({loading: true});\n\n            let formData = new FormData();\n            formData.append('field_name', this.context.fieldName);\n            formData.append('model_name', this.context.modelName);\n            formData.append('coordinates', JSON.stringify(this.props.name.split('-').slice(1)));\n            formData.append('file', e.target.files[0]);\n\n            fetch(endpoint, {\n                method: 'POST',\n                headers: {\n                    'X-CSRFToken': getCsrfCookie(),\n                },\n                body: formData\n            })\n            .then((response) => response.json())\n            .then((result) => {\n                // we create a fake event object\n                let event = {\n                    target: {\n                        type: 'text',\n                        value: result.file_path,\n                        name: this.props.name\n                    }\n                };\n\n                this.props.onChange(event);\n                this.setState({loading: false});\n            })\n            .catch((error) => {\n                alert('Something went wrong while uploading file');\n                console.error('Error:', error);\n                this.setState({loading: false});\n            });\n\n        }\n\n    }\n\n    showFileBrowser = () => {\n        this.inputRef.current.click();\n    }\n\n    clearFile = () => {\n        if (window.confirm('Do you want to remove this file?')) {\n            let event = {\n                target: {\n                    type: 'text',\n                    value: '',\n                    name: this.props.name\n                }\n            };\n\n            this.props.onChange(event);\n            \n            if (this.inputRef.current)\n                this.inputRef.current.value = '';\n        }\n    }\n\n    render() {\n        let {label, value, ...props} = {value, ...this.props};\n        props.type = 'file';\n        props.onChange = this.handleChange;\n\n        if (props.readOnly)\n            props.disabled = true;\n\n        return (\n            <div> \n                {label && <label>{label}</label>}\n                <div className=\"rjf-file-field\">\n                    {this.state.value && \n                        <div className=\"rjf-current-file-name\">\n                            Current file: <span>{this.state.fileName}</span> {' '}\n                            <Button className=\"remove-file\" onClick={this.clearFile}>Clear</Button>\n                        </div>\n                    }\n                    {this.state.value && !this.state.loading && 'Change:'}\n                    {this.state.loading ?\n                        <div className=\"rjf-file-field-loading\"><Loader/> Uploading...</div>\n                    : \n                    <div className=\"rjf-file-field-input\">\n                        <FormInput {...props} inputRef={this.inputRef} />\n                    </div>\n                    }\n                    </div>\n            </div>\n        );\n    }\n}\n\n\nexport class FormTextareaInput extends React.Component {\n    constructor(props) {\n        super(props);\n\n        if (!props.inputRef)\n            this.inputRef = React.createRef();\n    }\n\n    handleChange = (e) => {\n        this.updateHeight(e.target);\n\n        if (this.props.onChange)\n            this.props.onChange(e);\n    }\n\n    updateHeight = (el) => {\n        let offset = el.offsetHeight - el.clientHeight;\n        el.style.height = 'auto';\n        el.style.height = (el.scrollHeight + offset) + 'px';\n    }\n\n    componentDidMount() {\n        if (this.props.inputRef)\n            this.updateHeight(this.props.inputRef.current);\n        else \n            this.updateHeight(this.inputRef.current);\n    }\n\n    render() {\n        let {label, help_text, error, inputRef, ...props} = this.props;\n\n        delete props.type;\n\n        props.ref = inputRef || this.inputRef;\n        props.onChange = this.handleChange;\n\n        return (\n            <div>\n                {label && <label>{label}</label>}\n                <div className=\"rjf-input-group\">\n                    <textarea {...props} />\n                    {help_text && <span className=\"rjf-help-text\">{help_text}</span>}\n                </div>\n            </div>\n        );\n    }\n}\n\n\nexport class FormDateTimeInput extends React.Component {\n    constructor(props) {\n        super(props);\n        // we maintain this input's state in itself\n        // so that we can only pass valid values\n        // otherwise keep the value empty if invalid\n\n        this.state = {\n            ...this.getStateFromProps(),\n            showTimePicker: false,\n        };\n\n        this.timeInput = React.createRef();\n        this.timePickerContainer = React.createRef();\n    }\n\n    getStateFromProps = () => {\n        let date = '';\n        let hh = '12';\n        let mm = '00';\n        let ss = '00';\n        let ms = '000';\n        let ampm = 'am';\n\n        if (this.props.value) {\n            let d = new Date(this.props.value);\n            let year = d.getFullYear().toString().padStart(2, '0');\n            let month = (d.getMonth() + 1).toString().padStart(2, '0');\n            let day = d.getDate().toString().padStart(2, '0');\n            date = year + '-' + month + '-' + day;\n\n            hh = d.getHours();\n            if (hh === 0) {\n                hh = 12;\n            } else if (hh === 12) {\n                ampm = 'pm';\n            } else if (hh > 12) {\n                hh = hh - 12;\n                ampm = 'pm';\n            }\n\n            mm = d.getMinutes();\n            ss = d.getSeconds();\n            ms = d.getMilliseconds();\n\n            hh = hh.toString().padStart(2, '0');\n            mm = mm.toString().padStart(2, '0');\n            ss = ss.toString().padStart(2, '0');\n        }\n\n        return {\n            date: date, hh: hh, mm: mm, ss: ss, ms: ms, ampm: ampm\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevProps.value !== this.props.value) {\n            if (this.state.hh !== '' && this.state.hh !== '0' && this.state.hh !== '00') {\n\n                let changed = false;\n                let newState = this.getStateFromProps();\n                \n                for (let key in newState) {\n                    if (newState[key] !== this.state[key]) {\n                        changed = true;\n                        break;\n                    }\n                }\n\n                if (changed)\n                    this.setState({...newState});\n            }\n        }\n    }\n\n    componentDidMount() {\n        document.addEventListener('mousedown', this.handleClickOutside);\n    }\n\n    componentWillUnmount() {\n      document.removeEventListener('mousedown', this.handleClickOutside);\n    }\n\n    handleClickOutside = (e) => {\n        if (this.state.showTimePicker) {\n            if (this.timePickerContainer.current &&\n                !this.timePickerContainer.current.contains(e.target) &&\n                !this.timeInput.current.contains(e.target)\n            )\n                this.setState({showTimePicker: false});\n        }\n    };\n\n    sendValue = () => {\n        // we create a fake event object\n        // to send a combined value from two inputs\n        let event = {\n            target: {\n                type: 'text',\n                value: '',\n                name: this.props.name\n            }\n        };\n\n        if (this.state.date === '' || this.state.date === null)\n            return this.props.onChange(event);\n\n        let hh = parseInt(this.state.hh);\n\n        if (hh === 0)\n            hh = NaN; // zero value is invalid for 12 hour clock, but will be valid for 24 hour clock\n                      // so we set it to NaN to prevent creating a date object\n        \n        if (this.state.ampm === 'am') {\n            if (hh === 12)\n                hh = 0;\n        } else if (this.state.ampm === 'pm') {\n            if (hh !== 12)\n                hh = hh + 12;\n        }\n\n        hh = hh.toString().padStart(2, '0');\n        let mm = this.state.mm.padStart(2, '0');\n        let ss = this.state.ss.padStart(2, '0');\n\n        try {\n            let date = new Date(this.state.date + 'T' + hh + ':' + mm + ':' + ss + '.' + this.state.ms);\n            event['target']['value'] = date.toISOString().replace('Z', '+00:00') // make compatible to python\n        } catch (err) {\n            // invalid date\n            return this.props.onChange(event);\n        }\n\n        this.props.onChange(event);\n    }\n\n    handleDateChange = (e) => {\n        this.setState({date: e.target.value}, this.sendValue);\n    }\n\n    handleTimeChange = (value) => {\n        this.setState({...value}, this.sendValue);\n    }\n\n    showTimePicker = () => {\n        this.setState({showTimePicker: true});\n    }\n\n    render() {\n        return (\n            <div className=\"rjf-datetime-field\">\n                {this.props.label && <label>{this.props.label}</label>}\n                <div className=\"rjf-datetime-field-inner\">\n                    <div className=\"rjf-datetime-field-inputs\">\n                        <div className=\"rjf-datetime-field-date\">\n                            <FormInput\n                                label='Date'\n                                type='date'\n                                value={this.state.date}\n                                onChange={this.handleDateChange}\n                            />\n                        </div>\n                        <div className=\"rjf-datetime-field-time\">\n                            <FormInput\n                                label='Time'\n                                type='text'\n                                value={this.state.hh + ':' + this.state.mm + ':' + this.state.ss + ' ' + this.state.ampm}\n                                onFocus={this.showTimePicker}\n                                readOnly={true}\n                                inputRef={this.timeInput}\n                            />\n                            <div ref={this.timePickerContainer}>\n                                {this.state.showTimePicker &&\n                                    <TimePicker\n                                        onChange={this.handleTimeChange}\n                                        hh={this.state.hh}\n                                        mm={this.state.mm}\n                                        ss={this.state.ss}\n                                        ampm={this.state.ampm}\n                                    />\n                                }\n                            </div>\n                        </div>\n                    </div>\n                    {this.props.help_text && <span className=\"rjf-help-text\">{this.props.help_text}</span>}\n                </div>\n            </div>\n        );\n    }\n}\n","import Button from './buttons';\n\n\nexport function GroupTitle(props) {\n    if (!props.children)\n        return null;\n\n    return (\n        <div className=\"rjf-form-group-title\">\n            {props.editable ?\n                <span>{props.children} <Button className=\"edit\" onClick={props.onEdit} title=\"Edit\">Edit</Button></span>\n                :\n                props.children\n            }\n        </div>\n    );\n}\n\n\nfunction animate(e, animation, callback) {\n    let el = e.target.parentElement.parentElement;\n    let prevEl = el.previousElementSibling;\n    let nextEl = el.nextElementSibling;\n\n    el.classList.add('rjf-animate', 'rjf-' + animation);\n\n    if (animation === 'move-up') {\n        let {y, height} = prevEl.getBoundingClientRect();\n        let y1 = y, h1 = height;\n        \n        ({y, height} = el.getBoundingClientRect());\n        let y2 = y, h2 = height;\n        \n        prevEl.classList.add('rjf-animate');\n\n        prevEl.style.opacity = 0;\n        prevEl.style.transform = 'translateY(' + (y2 - y1)  + 'px)';\n\n        el.style.opacity = 0;\n        el.style.transform = 'translateY(-' + (y2 - y1)  + 'px)';\n\n    } else if (animation === 'move-down') {\n        let {y, height} = el.getBoundingClientRect();\n        let y1 = y, h1 = height;\n        \n        ({y, height} = nextEl.getBoundingClientRect());\n        let y2 = y, h2 = height;\n        \n        nextEl.classList.add('rjf-animate');\n\n        nextEl.style.opacity = 0;\n        nextEl.style.transform = 'translateY(-' + (y2 - y1)  + 'px)';\n\n        el.style.opacity = 0;\n        el.style.transform = 'translateY(' + (y2 - y1)  + 'px)';\n    }\n\n    setTimeout(function() {\n        callback();\n        \n        el.classList.remove('rjf-animate', 'rjf-' + animation);\n        el.style = null;\n\n        if (animation === 'move-up') {\n            prevEl.classList.remove('rjf-animate');\n            prevEl.style = null;\n        }\n        else if (animation === 'move-down') {\n            nextEl.classList.remove('rjf-animate');\n            nextEl.style = null;\n        }\n    }, 200);\n}\n\nexport function FormRowControls(props) {\n    return (\n        <div className=\"rjf-form-row-controls\">\n            {props.onMoveUp &&\n                <Button \n                    className=\"move-up\"\n                    onClick={(e) => animate(e, 'move-up', props.onMoveUp)}\n                    title=\"Move up\"\n                >\n                    <span>&uarr;</span>\n                </Button>\n            }\n            {props.onMoveDown &&\n                <Button \n                    className=\"move-down\"\n                    onClick={(e) => animate(e, 'move-down', props.onMoveDown)}\n                    title=\"Move down\"\n                >\n                    <span>&darr;</span>\n                </Button>\n            }\n            {props.onRemove &&\n                <Button \n                    className=\"remove\"\n                    onClick={(e) => animate(e, 'remove', props.onRemove)}\n                    title=\"Remove\"\n                >\n                    <span>&times;</span>\n                </Button>\n            }\n        </div>\n    );\n}\n\nexport function FormRow(props) {\n    return (\n        <div className=\"rjf-form-row\">\n            <FormRowControls {...props} />\n            <div className=\"rjf-form-row-inner\">\n                {props.children}\n            </div>\n        </div>\n    );\n}\n\n\nexport function FormGroup(props) {\n    let hasChildren = React.Children.count(props.children);\n\n    let innerClassName = props.level === 0 && !hasChildren\n        ? \"\" \n        : \"rjf-form-group-inner\";\n\n    return (\n        <div className=\"rjf-form-group\">\n            {props.level === 0 && <GroupTitle editable={props.editable} onEdit={props.onEdit}>{props.schema.title}</GroupTitle>}\n            <div className={innerClassName}>\n                {props.level > 0 && <GroupTitle editable={props.editable} onEdit={props.onEdit}>{props.schema.title}</GroupTitle>}\n                {props.children}\n                {props.addable && \n                <Button\n                    className=\"add\"\n                    onClick={(e) => props.onAdd()}\n                    title={props.schema.type === 'object' ? 'Add new key' : 'Add new item'}\n                >\n                    {props.schema.type === 'object' ? 'Add key' : 'Add item'}\n                </Button>\n                }\n            </div>\n        </div>\n    );\n}\n","import {getBlankData} from './data';\nimport {Button, FormInput, FormCheckInput, FormRadioInput, FormSelectInput,\n    FormFileInput, FormRow, FormGroup, GroupTitle, FormRowControls, FormTextareaInput,\n    FormDateTimeInput, FormMultiSelectInput} from './components';\nimport {getVerboseName} from './util';\n\n\nfunction handleChange(e, fieldType, callback) {\n    let type = e.target.type\n    let value;\n\n    if (type === 'checkbox') {\n        value = e.target.checked;\n    } else {\n        value = e.target.value;\n    }\n\n    if (fieldType === 'number' || fieldType === 'integer') {\n        value = value.trim();\n        if (value === '')\n            value = null;\n        else if (!isNaN(Number(value)))\n            value = Number(value);\n    } else if (fieldType === 'boolean') {\n        if (value === 'false' || value === false)\n            value = false;\n        else\n            value = true;\n    }\n\n    callback(e.target.name, value);\n}\n\n\nfunction FormField(props) {\n    let inputProps = {\n        name: props.name,\n        value: props.data,\n        readOnly: props.schema.readOnly || props.schema.readonly,\n        help_text: props.schema.help_text || props.schema.helpText,\n    };\n\n    let type = props.schema.type;\n    if (props.schema.choices) {\n        inputProps.options = props.schema.choices;\n        type = 'select';\n    }\n    if (props.schema.widget) {\n         if (props.schema.widget === 'multiselect' && props.parentType !== 'array') {\n            // pass\n         } else {\n            type = props.schema.widget;\n         }\n    }\n\n\n    let InputField;\n\n    switch (type) {\n        case 'string':\n            InputField = FormInput;\n\n            if (props.schema.format) {\n                if (props.schema.format === 'data-url' || props.schema.format === 'file-url') {\n                    InputField = FormFileInput;\n                } else if (props.schema.format === 'datetime') {\n                    InputField = FormDateTimeInput;\n                }\n                inputProps.type = props.schema.format;\n            }\n            else {\n                inputProps.type = 'text';\n            }\n            break;\n        case 'number':\n            inputProps.type = 'number';\n            InputField = FormInput;\n            break;\n        case 'integer':\n            inputProps.type = 'number';\n            inputProps.step = '1';\n            InputField = FormInput;\n            break;\n        case 'boolean':\n            inputProps.type = 'checkbox';\n            InputField = FormCheckInput;\n            break;\n        case 'checkbox':\n            inputProps.type = 'checkbox';\n            InputField = FormCheckInput;\n            break;\n        case 'radio':\n            inputProps.type = 'radio';\n            InputField = FormRadioInput;\n            break;\n        case 'select':\n            InputField = FormSelectInput;\n            break;\n        case 'multiselect':\n            InputField = FormMultiSelectInput;\n            break;\n        case 'textarea':\n            InputField = FormTextareaInput;\n            break;\n        default:\n            inputProps.type = 'text';\n            InputField = FormInput;\n    }\n\n   return (\n        <InputField \n            {...inputProps}\n            label={\n                props.editable ? <span>{props.schema.title} <Button className=\"edit\" onClick={props.onEdit} title=\"Edit\">Edit</Button></span>\n                :\n                props.schema.title\n            }\n            onChange={(e) => handleChange(e, props.schema.type, props.onChange)}\n        />\n    );\n}\n\n\nexport function getStringFormRow(args) {\n    let {\n        data, schema, name, onChange, onRemove, removable, onEdit, editable, \n        onMoveUp, onMoveDown, parentType, ...fieldProps\n    } = args;\n\n    return (\n        <FormRow \n            key={name}\n            onRemove={removable ? (e) => onRemove(name) : null}\n            onMoveUp={onMoveUp}\n            onMoveDown={onMoveDown}\n        >\n            <FormField \n                data={data}\n                schema={schema}\n                name={name}\n                onChange={onChange}\n                onEdit={onEdit}\n                editable={editable}\n                parentType={parentType}\n                {...fieldProps}\n            />\n        </FormRow>\n    );\n}\n\nexport function getArrayFormRow(args) {\n    let {data, schema, name, onChange, onAdd, onRemove, onMove, level} = args;\n\n    let rows = [];\n    let groups = [];\n\n    let removable = true;\n    let min_items = schema.min_items || schema.minItems || 0;\n    if (data.length <= min_items)\n        removable = false;\n\n    let addable = true;\n    let max_items = schema.max_items || schema.maxItems || 100;\n    if (data.length >= max_items)\n        addable = false;\n\n    let isRef = schema.items.hasOwnProperty('$ref');\n\n    if (isRef)\n        schema.items = args.getRef(schema.items['$ref']);\n\n    let type = schema.items.type;\n    \n    if (type === 'list')\n        type = 'array';\n    else if (type === 'dict')\n        type = 'object';\n\n    let nextArgs = {\n        schema: schema.items,\n        onChange: onChange,\n        onAdd: onAdd,\n        onRemove: onRemove,\n        level: level + 1,\n        removable: removable,\n        onMove: onMove,\n        parentType: 'array',\n        getRef: args.getRef\n    };\n\n    if (nextArgs.schema.widget === 'multiselect') {\n        nextArgs.data = data;\n        nextArgs.name = name;\n        nextArgs.removable = false;\n        nextArgs.onMoveUp = null;\n        nextArgs.onMoveDown = null;\n        addable = false;\n        rows.push(getStringFormRow(nextArgs));\n    } else {\n\n        for (let i = 0; i < data.length; i++) {\n            nextArgs.data = data[i];\n            nextArgs.name = name + '-' + i;\n\n            if (i === 0)\n                nextArgs.onMoveUp = null;\n            else\n                nextArgs.onMoveUp = (e) => onMove(name + '-' + i, name + '-' + (i - 1));\n\n            if (i === data.length - 1)\n                nextArgs.onMoveDown = null;\n            else\n                nextArgs.onMoveDown = (e) => onMove(name + '-' + i, name + '-' + (i + 1));\n\n            if (type === 'array') {\n                groups.push(getArrayFormRow(nextArgs));\n            } else if (type === 'object') {\n                groups.push(getObjectFormRow(nextArgs));\n            } else {\n                rows.push(getStringFormRow(nextArgs));\n            } \n        }\n    }\n\n    let coords = name; // coordinates for insertion and deletion\n\n    if (rows.length || (!rows.length && !groups.length)) {\n        rows = (\n            <FormGroup\n                level={level}\n                schema={schema}\n                addable={addable}\n                onAdd={() => onAdd(getBlankData(schema.items, args.getRef), coords)}\n                editable={args.editable}\n                onEdit={args.onEdit}\n                key={'row_group_' + name}\n            >\n                {rows}\n            </FormGroup>\n        );\n\n        if (args.parentType === 'object' && args.removable) {\n            rows = (\n                <div className=\"rjf-form-group-wrapper\" key={'row_group_wrapper_' + name}>\n                    <FormRowControls\n                        onRemove={(e) => onRemove(name)}\n                    />\n                    {rows}\n                </div>\n            );\n        }\n    }\n\n    if (groups.length) {\n        let groupTitle = schema.title ? <GroupTitle editable={args.editable} onEdit={args.onEdit}>{schema.title}</GroupTitle> : null;\n\n        groups = (\n            <div key={'group_' + name} className=\"rjf-form-group-wrapper\">\n                {args.parentType === 'object' && args.removable &&\n                    <FormRowControls\n                        onRemove={(e) => onRemove(name)}\n                    />\n                }\n                <div className=\"rjf-form-group\">\n                    <div className={level > 0 ? \"rjf-form-group-inner\" : \"\"}>\n                        {groupTitle}\n                        {groups.map((i, index) => (\n                            <div className=\"rjf-form-group-wrapper\" key={'group_wrapper_' + name + '_' + index}>\n                                <FormRowControls\n                                    onRemove={removable ? (e) => onRemove(name + '-' + index) : null}\n                                    onMoveUp={index > 0 ? (e) => onMove(name + '-' + index, name + '-' + (index - 1)) : null}\n                                    onMoveDown={index < groups.length - 1 ? (e) => onMove(name + '-' + index, name + '-' + (index + 1)) : null}\n                                />\n                                {i}\n                            </div>\n                            )\n                        )}\n                        {addable && \n                            <Button\n                                className=\"add\"\n                                onClick={(e) => onAdd(getBlankData(schema.items, args.getRef), coords)}\n                                title=\"Add new item\"\n                            >\n                                Add item\n                            </Button>\n                        }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n    return [...rows, ...groups];\n}\n\n\nexport function getObjectFormRow(args) {\n    let {data, schema, name, onChange, onAdd, onRemove, level, onMove} = args;\n\n    let rows = [];\n\n    let schema_keys = schema.keys || schema.properties;\n\n    let keys = [...Object.keys(schema_keys)];\n\n    if (schema.additionalProperties)\n        keys = [...keys, ...Object.keys(data).filter((k) => keys.indexOf(k) === -1)];\n\n    for (let i = 0; i < keys.length; i++) {\n        let key = keys[i];\n        let value = data[key];\n        let childName = name + '-' + key;\n        let schemaValue = schema_keys[key];\n\n        if (typeof schemaValue === 'undefined') {\n            // for keys added through additionalProperties\n            if (typeof schema.additionalProperties === 'boolean')\n                schemaValue = {type: 'string'};\n            else\n                schemaValue = {...schema.additionalProperties};\n        }\n\n        let isRef = schemaValue.hasOwnProperty('$ref');\n\n        if (isRef)\n            schemaValue = args.getRef(schemaValue['$ref']);\n\n        let type = schemaValue.type;\n    \n        if (type === 'list')\n            type = 'array';\n        else if (type === 'dict')\n            type = 'object';\n\n        if (!schemaValue.title || (isRef && schema.additionalProperties)) // for additionalProperty refs, use the key as the title\n            schemaValue.title = getVerboseName(key);\n\n        let removable = false;\n        if (schema_keys[key] === undefined)\n            removable = true;\n\n        let nextArgs = {\n            data: value,\n            schema: schemaValue,\n            name: childName,\n            onChange: onChange,\n            onAdd: onAdd,\n            onRemove: onRemove,\n            level: level + 1,\n            removable: removable,\n            onMove: onMove,\n            parentType: 'object',\n            getRef: args.getRef,\n        };\n\n        nextArgs.onEdit = () => handleKeyEdit(data, key, value, childName, onAdd, onRemove);\n        nextArgs.editable = removable;\n\n         if (type === 'array') {\n            rows.push(getArrayFormRow(nextArgs));\n        } else if (type === 'object') {\n            rows.push(getObjectFormRow(nextArgs));\n        } else {\n            rows.push(getStringFormRow(nextArgs));\n        }\n    }\n\n    if (rows.length || schema.additionalProperties) {\n        let coords = name;\n\n        rows = (\n            <FormGroup\n                level={level}\n                schema={schema}\n                addable={schema.additionalProperties}\n                onAdd={() => handleKeyValueAdd(data, coords, onAdd, schema.additionalProperties, args.getRef)}\n                editable={args.editable}\n                onEdit={args.onEdit}\n                key={'row_group_' + name}\n            >\n                {rows}\n            </FormGroup>\n        );\n        if (args.parentType === 'object' && args.removable) {\n            rows = (\n                <div className=\"rjf-form-group-wrapper\" key={'row_group_wrapper_' + name}>\n                    <FormRowControls\n                        onRemove={(e) => onRemove(name)}\n                    />\n                    {rows}\n                </div>\n            );\n        }\n\n    }\n\n    return rows;\n}\n\n\nfunction handleKeyValueAdd(data, coords, onAdd, newSchema, getRef) {\n    let key = prompt(\"Add new key\");\n    if (key === null) // clicked cancel\n        return;\n\n    if (newSchema === true)\n        newSchema = {type: 'string'};\n\n    key = key.trim();\n    if (!key)\n        alert(\"(!) Can't add empty key.\\r\\n\\r\\n‎\");\n    else if (data.hasOwnProperty(key))\n        alert(\"(!) Duplicate keys not allowed. This key already exists.\\r\\n\\r\\n‎\");\n    else\n        onAdd(getBlankData(newSchema, getRef), coords + '-' + key);   \n}\n\n\nfunction handleKeyEdit(data, key, value, coords, onAdd, onRemove) {\n    let newKey = prompt(\"Rename key\", key);\n    if (newKey === null) // clicked cancel\n        return;\n\n    newKey = newKey.trim();\n\n    if (newKey === key) // same keys\n        return;\n\n    if (!newKey)\n        return alert(\"(!) Key name can't be empty.\\r\\n\\r\\n‎\");\n    else if (data.hasOwnProperty(newKey))\n        return alert(\"(!) Duplicate keys not allowed. This key already exists.\\r\\n\\r\\n‎\");\n\n    let newCoords = coords.split('-');\n    newCoords.pop();\n    newCoords.push(newKey);\n    newCoords = newCoords.join('-');\n\n    onAdd(value, newCoords);\n    onRemove(coords);\n}\n","import {getBlankData, getSyncedData} from './data';\nimport {getArrayFormRow, getObjectFormRow} from './ui';\nimport {EditorContext} from './util';\n\n\nexport default class Form extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.dataInput = document.getElementById(this.props.dataInputId);\n        this.schema = props.schema;\n\n        let data = props.data;\n\n        if (!data) {\n            // create empty data from schema\n            data = getBlankData(this.schema, this.getRef);\n        } else {\n            // data might be stale if schema has new keys, so add them to data\n            try {\n                data = getSyncedData(data, this.schema, this.getRef);\n            } catch (error) {\n                console.error(\"Error: Schema and data structure don't match\");\n                console.error(error);\n            }\n        }\n\n        this.state = {\n            value: '',\n            data: data\n        };\n        \n        // update data in the input\n        this.populateDataInput();\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (this.state.data !== prevState.data) {\n            this.populateDataInput();\n        }\n    }\n\n    populateDataInput = () => {\n        this.dataInput.value = JSON.stringify(this.state.data);\n    }\n\n    handleChange = (coords, value) => {\n        /*\n            e.target.name is a chain of indices and keys:\n            xxx-0-key-1-key2 and so on.\n            These can be used as coordinates to locate \n            a particular deeply nested item.\n\n            This first coordinate is not important and should be removed.\n        */\n        coords = coords.split('-');\n\n        coords.shift(); // remove first coord\n\n        function setDataUsingCoords(coords, data, value) {\n            let coord = coords.shift();\n            if (!isNaN(Number(coord)))\n                coord = Number(coord);\n\n            if (coords.length) {\n                setDataUsingCoords(coords, data[coord], value);\n            } else {\n                data[coord] = value;\n            }\n        }\n\n        let _data = JSON.parse(JSON.stringify(this.state.data));\n\n        setDataUsingCoords(coords, _data, value);\n\n        this.setState({data: _data});\n    }\n\n    getRef = (ref) => {\n        /* Returns schema reference. Nothing to do with React's refs.*/\n\n        let refSchema;\n        let tokens = ref.split('/');\n\n        for (let i = 0; i < tokens.length; i++) {\n            let token = tokens[i];\n\n            if (token === '#')\n                refSchema = this.schema;\n            else\n                refSchema = refSchema[token];\n        }\n\n\n        return {...refSchema};\n    }\n\n    getFields = () => {\n        let data = this.state.data;\n        let formGroups = [];\n\n        try {\n            let type = this.schema.type;\n    \n            if (type === 'list')\n                type = 'array';\n            else if (type === 'dict')\n                type = 'object';\n\n            let args = {\n                data: data,\n                schema: this.schema,\n                name: 'rjf',\n                onChange: this.handleChange,\n                onAdd: this.addFieldset,\n                onRemove: this.removeFieldset,\n                onMove: this.moveFieldset,\n                level: 0,\n                getRef: this.getRef,\n            };\n\n            if (type === 'array') {\n                return getArrayFormRow(args);\n            } else if (type === 'object') {\n                return getObjectFormRow(args);\n            }\n        } catch (error) {\n            formGroups = (\n                <p style={{color: '#f00'}}>\n                    <strong>(!) Error:</strong> Schema and data structure do not match.\n                </p>\n            );\n        }\n\n        return formGroups;\n    }\n\n    addFieldset = (blankData, coords) => {\n        coords = coords.split('-');\n        coords.shift();\n\n        this.setState((state) => {\n            let _data = JSON.parse(JSON.stringify(state.data));\n\n            addDataUsingCoords(coords, _data, blankData);\n\n            return {data: _data};\n        });\n    }\n\n    removeFieldset = (coords) => {\n        coords = coords.split('-');\n        coords.shift();\n\n        this.setState((state) => {\n            let _data = JSON.parse(JSON.stringify(state.data));\n\n            removeDataUsingCoords(coords, _data);\n\n            return {data: _data};\n        });\n    }\n\n    moveFieldset = (oldCoords, newCoords) => {\n        oldCoords = oldCoords.split(\"-\");\n        oldCoords.shift();\n\n        newCoords = newCoords.split(\"-\");\n        newCoords.shift();\n\n        this.setState((state) => {\n            let _data = JSON.parse(JSON.stringify(state.data));\n\n            moveDataUsingCoords(oldCoords, newCoords, _data);\n\n            return {data: _data};\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"rjf-form-wrapper\">\n                <fieldset className=\"module aligned\">\n                    <EditorContext.Provider \n                        value={{\n                            fileUploadEndpoint: this.props.fileUploadEndpoint,\n                            fieldName: this.props.fieldName,\n                            modelName: this.props.modelName,\n                        }}\n                    >\n                    {this.getFields()}\n                    </EditorContext.Provider>\n                </fieldset>\n            </div>\n        );\n    }\n}\n\n\nfunction addDataUsingCoords(coords, data, value) {\n    let coord = coords.shift();\n    if (!isNaN(Number(coord)))\n        coord = Number(coord);\n\n    if (coords.length) {\n        addDataUsingCoords(coords, data[coord], value);\n    } else {\n        if (Array.isArray(data[coord])) {\n            data[coord].push(value);\n        }\n        else {\n            if (Array.isArray(data)) {\n                data.push(value);\n            } else {\n                data[coord] = value;\n            }\n        }\n    }\n}\n\nfunction removeDataUsingCoords(coords, data) {\n    let coord = coords.shift();\n    if (!isNaN(Number(coord)))\n        coord = Number(coord);\n\n    if (coords.length) {\n        removeDataUsingCoords(coords, data[coord]);\n    } else {\n        if (Array.isArray(data))\n            data.splice(coord, 1); // in-place mutation\n        else\n            delete data[coord];\n    }\n}\n\n\nfunction moveDataUsingCoords(oldCoords, newCoords, data) {\n    let oldCoord = oldCoords.shift();\n\n    if (!isNaN(Number(oldCoord)))\n        oldCoord = Number(oldCoord);\n\n    if (oldCoords.length) {\n        moveDataUsingCoords(oldCoords, newCoords, data[oldCoord]);\n    } else {\n        if (Array.isArray(data)) {\n            /* Using newCoords allows us to move items from \n            one array to another. \n            However, for now, we're only moving items in a \n            single array.\n            */\n            let newCoord = newCoords[newCoords.length - 1];\n            \n            let item = data[oldCoord];\n\n            data.splice(oldCoord, 1);\n            data.splice(newCoord, 0, item);\n        }\n    }\n}\n","import Form from './form';\n\n\nexport default function JSONForm(config) {\n    this.containerId = config.containerId;\n    this.dataInputId = config.dataInputId;\n    this.schema = config.schema;\n    this.data = config.data;\n    this.fileUploadEndpoint = config.fileUploadEndpoint;\n    this.fieldName = config.fieldName;\n    this.modelName = config.modelName;\n\n    this.render = function() {\n        ReactDOM.render(\n            <Form\n                schema={this.schema}\n                dataInputId={this.dataInputId}\n                data={this.data}\n                fileUploadEndpoint={this.fileUploadEndpoint}\n                fieldName={this.fieldName}\n                modelName={this.modelName}\n            />,\n            document.getElementById(this.containerId)\n        );\n    }\n}","import JSONForm from './renderer';\n\n\nexport default {\n  JSONForm,\n};"],"names":["getBlankObject","schema","getRef","keys","schema_keys","properties","key","value","isRef","hasOwnProperty","type","getBlankArray","items","minItems","min_items","push","widget","getBlankData","getSyncedArray","data","newData","JSON","parse","stringify","i","length","item","getSyncedObject","Object","schemaValue","getSyncedData","Button","className","props","classes","split","trim","children","Loader","Icon","icon","name","ChevronUp","ChevronDown","TimePicker","sendValue","onChange","validateValue","handleChange","e","target","dataset","isNaN","validValue","parseInt","startsWith","toString","padStart","handleKeyDown","keyCode","handleSpin","handleBlur","componentWillUnmount","hh","mm","ss","render","ampm","React","Component","EditorContext","createContext","capitalize","string","charAt","toUpperCase","substr","toLowerCase","getVerboseName","undefined","replace","getCsrfCookie","csrfCookies","document","cookie","filter","indexOf","input","querySelector","FormInput","label","help_text","inputRef","ref","FormCheckInput","checked","readOnly","disabled","FormRadioInput","options","map","option","inputValue","FormSelectInput","FormMultiSelectInput","event","showOptions","state","setState","hideOptions","toggleOptions","optionsContainer","createRef","error","FormMultiSelectInputOptions","handleClickOutside","containerRef","current","contains","componentDidMount","addEventListener","removeEventListener","hasHelpText","marginTop","selected","optionClassName","dataURItoBlob","dataURI","splitted","params","param","binary","atob","array","charCodeAt","blob","window","Blob","Uint8Array","FormFileInput","getFileName","extractFileInfo","dataURL","size","addNameToDataURL","encodeURIComponent","file","files","fileName","reader","FileReader","onload","result","readAsDataURL","endpoint","context","fileUploadEndpoint","console","alert","loading","formData","FormData","append","fieldName","modelName","slice","fetch","method","headers","body","then","response","json","file_path","showFileBrowser","click","clearFile","confirm","componentDidUpdate","prevProps","prevState","contextType","FormTextareaInput","updateHeight","el","offset","offsetHeight","clientHeight","style","height","scrollHeight","FormDateTimeInput","getStateFromProps","date","ms","d","Date","year","getFullYear","month","getMonth","day","getDate","getHours","getMinutes","getSeconds","getMilliseconds","showTimePicker","timePickerContainer","timeInput","NaN","toISOString","err","handleDateChange","handleTimeChange","changed","newState","GroupTitle","editable","onEdit","animate","animation","callback","parentElement","prevEl","previousElementSibling","nextEl","nextElementSibling","classList","add","getBoundingClientRect","y","y1","y2","opacity","transform","setTimeout","remove","FormRowControls","onMoveUp","onMoveDown","onRemove","FormRow","FormGroup","hasChildren","Children","count","innerClassName","level","title","addable","onAdd","fieldType","Number","FormField","inputProps","readonly","helpText","choices","parentType","InputField","format","step","getStringFormRow","args","removable","fieldProps","getArrayFormRow","onMove","rows","groups","max_items","maxItems","nextArgs","getObjectFormRow","coords","groupTitle","index","additionalProperties","k","childName","handleKeyEdit","handleKeyValueAdd","newSchema","prompt","newKey","newCoords","pop","join","Form","populateDataInput","dataInput","shift","setDataUsingCoords","coord","_data","refSchema","tokens","token","getFields","formGroups","addFieldset","removeFieldset","moveFieldset","color","blankData","addDataUsingCoords","removeDataUsingCoords","oldCoords","moveDataUsingCoords","getElementById","dataInputId","Array","isArray","splice","oldCoord","newCoord","JSONForm","config","containerId","ReactDOM"],"mappings":"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"}